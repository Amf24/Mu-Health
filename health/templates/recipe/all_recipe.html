{% extends 'base.html' %}
{% block content %}
{% load static %}

<style>
 *{
    margin: 0;
    padding: 0;
    -webkit-box-sizing: border-box;
            box-sizing: border-box;
  }
  
  h1{
    font-size: 2.5rem;
    font-weight: normal;
    text-align: center;
    margin: 2rem 0;
  }
  
  .wrapper{
    width: 90%;
    margin: 5px auto;
    max-width: 80rem;
  }
  
  .cols{
    display: -webkit-box;
    display: -ms-flexbox;
    display: flex;
    -ms-flex-wrap: wrap;
        flex-wrap: wrap;
    -webkit-box-pack: center;
        -ms-flex-pack: center;
            justify-content: center;
  }
  
  .col{
    width: calc(25% - 2rem);
    margin: 1rem;
    cursor: pointer;
  }
  
  .container{
    -webkit-transform-style: preserve-3d;
            transform-style: preserve-3d;
    -webkit-perspective: 1000px;
            perspective: 1000px;
  }
  
  .front,
  .back{
    background-size: cover;
    box-shadow: 0 4px 8px 0 rgba(0,0,0,0.25);
    border-radius: 10px;
    background-position: center;
    -webkit-transition: -webkit-transform .7s cubic-bezier(0.4, 0.2, 0.2, 1);
    transition: -webkit-transform .7s cubic-bezier(0.4, 0.2, 0.2, 1);
    -o-transition: transform .7s cubic-bezier(0.4, 0.2, 0.2, 1);
    transition: transform .7s cubic-bezier(0.4, 0.2, 0.2, 1);
    transition: transform .7s cubic-bezier(0.4, 0.2, 0.2, 1), -webkit-transform .7s cubic-bezier(0.4, 0.2, 0.2, 1);
    -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
    text-align: center;
    min-height: 220px;
    height: auto;
    border-radius: 10px;
    color: #fff;
    font-size: 1.5rem;
  }
  
  .back{
    background: #cedce7;
    background: -webkit-linear-gradient(45deg,  #cedce7 0%,#596a72 100%);
    background: -o-linear-gradient(45deg,  #cedce7 0%,#596a72 100%);
    background: linear-gradient(45deg,  #cedce7 0%,#596a72 100%);
  }
  
  .front:after{
    position: absolute;
      top: 0;
      left: 0;
      z-index: 1;
      width: 100%;
      height: 100%;
      content: '';
      display: block;
      opacity: .6;
      background-color: #000;
      -webkit-backface-visibility: hidden;
              backface-visibility: hidden;
      border-radius: 10px;
  }
  .container:hover .front,
  .container:hover .back{
      -webkit-transition: -webkit-transform .7s cubic-bezier(0.4, 0.2, 0.2, 1);
      transition: -webkit-transform .7s cubic-bezier(0.4, 0.2, 0.2, 1);
      -o-transition: transform .7s cubic-bezier(0.4, 0.2, 0.2, 1);
      transition: transform .7s cubic-bezier(0.4, 0.2, 0.2, 1);
      transition: transform .7s cubic-bezier(0.4, 0.2, 0.2, 1), -webkit-transform .7s cubic-bezier(0.4, 0.2, 0.2, 1);
  }
  
  .back{
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
  }
  
  .inner{
      -webkit-transform: translateY(-50%) translateZ(60px) scale(0.94);
              transform: translateY(-50%) translateZ(60px) scale(0.94);
      top: 76%;
      position: absolute;
      left: 0;
      width: 100%;
      padding: 2rem;
      -webkit-box-sizing: border-box;
              box-sizing: border-box;
      outline: 1px solid transparent;
      -webkit-perspective: inherit;
              perspective: inherit;
      z-index: 2;
  }

  .inner-img{
      -webkit-transform: translateY(-50%) translateZ(60px) scale(0.94);
              transform: translateY(-50%) translateZ(60px) scale(0.94);
      top: 50%;
      position: absolute;
      left: 0;
      width: 100%;
      padding: 2rem;
      -webkit-box-sizing: border-box;
              box-sizing: border-box;
      outline: 1px solid transparent;
      -webkit-perspective: inherit;
              perspective: inherit;
      z-index: 2;
  }
  
  .container .back{
      -webkit-transform: rotateY(180deg);
              transform: rotateY(180deg);
      -webkit-transform-style: preserve-3d;
              transform-style: preserve-3d;
  }
  
  .container .front{
      -webkit-transform: rotateY(0deg);
              transform: rotateY(0deg);
      -webkit-transform-style: preserve-3d;
              transform-style: preserve-3d;
  }
  
  .container:hover .back{
    -webkit-transform: rotateY(0deg);
            transform: rotateY(0deg);
    -webkit-transform-style: preserve-3d;
            transform-style: preserve-3d;
  }
  
  .container:hover .front{
    -webkit-transform: rotateY(-180deg);
            transform: rotateY(-180deg);
    -webkit-transform-style: preserve-3d;
            transform-style: preserve-3d;
  }
  
  .front .inner p{
    font-size: 2rem;
    margin-bottom: 1rem;
    position: relative;
  }
  
  .front .inner p:after{
    content: '';
    width: 4rem;
    height: 2px;
    position: absolute;
    background: #C6D4DF;
    display: block;
    left: 0;
    right: 0;
    margin: 0 auto;
    bottom: -.75rem;
  }
  
  .front .inner span{
    color: rgba(255,255,255,0.7);
    font-family: 'Montserrat';
    font-weight: 300;
  }
  
  @media screen and (max-width: 64rem){
    .col{
      width: calc(33.333333% - 2rem);
    }
  }
  
  @media screen and (max-width: 48rem){
    .col{
      width: calc(50% - 2rem);
    }
  }
  
  @media screen and (max-width: 32rem){
    .col{
      width: 100%;
      margin: 0 0 2rem 0;
    }
  } 

</style>
<div class="all-recipes-container">
    <h2>All Recipes</h2>

    <form class="search-bar" style="width: 20%;" method=POST action="{% url 'search_recip' %} " >
      {%csrf_token%}
          <div class="input-group">
              <input type="search" class="form-control rounded" placeholder="Search ..." aria-label="Search" name="searched"
                  aria-describedby="search-addon" />
              <button type="submit" class="btn btn-outline-primary">search </button>
              
          </div>
      </form>

    <div class="add-recipe-btn">
        <button type="button" id="add-recipe" class="btn btn-light" data-mdb-ripple-color="dark"
            style="background-color: #D77A61; border: #D77A61; float: right; margin: 20px;"><a
                href="{% url 'new_recipe' %} " style="text-decoration: none; color: black;">Post a recipe</a></button>
    </div>
</div>

<br><br>

<div class="all-recipes" style="width: 100%; margin: auto; height: auto; margin-top:30px">
    <div class="show-all-recipe-container"
        style="width: 100%; margin: 20px 0; justify-content: center;">

        {% for resipe in all_recipes %}
        <div class="wrapper">
  <div class="cols">
      <div class="col" ontouchstart="this.classList.toggle('hover');">
          <div class="container">
              <div class="front" style="background-image: url({% static resipe.image %})">
                  <div class="inner">
                      <p>{{resipe.title}}</p>
                      <span>By {{resipe.author}}</span>
                  </div>
              </div>
              <div class="back">
                  <div class="inner-img" 
                      style="background-image: url({% static resipe.image %}); background-position: center; background-size: cover; height: 220px;">
                      <a href="{% url 'show_recipe' pk=resipe.id %}" type="button" class="btn btn-outline-success" style="background-color: #D77A61; border: #D77A61; color:black; position:absolute; top: 76%;">
                        click for more
                    </a>
                  </div>
              </div>
          </div>
      </div>
  </div>
</div>
        {%endfor%}

       
    </div>
    <div class="pagination" style="justify-content: center;">
        <ul style="display: flex; list-style-type: none; font-size: 20px;">
        {% if all_recipes.has_previous %}
        <li style="margin-left: 5px;"><a href="?page={{all_recipes.previous_page_number}}" style="text-decoration: none; color: black;">Previous</a></li>
        {% endif %}
        {% for pg in all_recipes.paginator.page_range %}
        {% if all_recipes.number == pg %}
            <li class="active" style="margin-left: 5px;"><a href="?page={{ pg }}" style="color: black;">{{ pg }}</a></li>
        {% else %}
            <li style="margin-left: 5px;"><a href="?page={{ pg }}" style="text-decoration: none; color: black;">{{ pg }}</a></li>
        {% endif %}
        {% endfor %}
        {% if all_recipes.has_next %}
        <li style="margin-left: 5px;"><a href="?page={{ all_recipes.next_page_number }}" style="text-decoration: none; color: black;">Next</a></li>
        {% endif %}

    </ul>
    </div>
</div>

{% endblock %}